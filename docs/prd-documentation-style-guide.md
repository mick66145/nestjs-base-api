# PRD 產品需求文件撰寫風格指南

> **版本：** v1.0
> **更新日期：** 2025-11-21
> **文件類型：** 產品需求文件撰寫規範
> **適用範圍：** 所有產品需求文件 (Product Requirements Document)

---

## 📋 目錄

- [1. 概述](#1-概述)
- [2. PRD 文件結構](#2-prd-文件結構)
- [3. 文件資訊撰寫規範](#3-文件資訊撰寫規範)
- [4. 執行摘要撰寫規範](#4-執行摘要撰寫規範)
- [5. 產品概述撰寫規範](#5-產品概述撰寫規範)
- [6. 目標使用者撰寫規範](#6-目標使用者撰寫規範)
- [7. 功能需求撰寫規範](#7-功能需求撰寫規範)
- [8. 非功能需求撰寫規範](#8-非功能需求撰寫規範)
- [9. 使用案例撰寫規範](#9-使用案例撰寫規範)
- [10. 系統架構撰寫規範](#10-系統架構撰寫規範)
- [11. 成功指標撰寫規範](#11-成功指標撰寫規範)
- [12. 風險管理撰寫規範](#12-風險管理撰寫規範)
- [13. 完整 PRD 範例](#13-完整-prd-範例)
- [14. 檢查清單](#14-檢查清單)

---

## 1. 概述

### 1.1 PRD 文件撰寫目標

- ✅ **清晰的產品定位**：明確產品願景、目標市場與核心價值
- ✅ **完整的需求描述**：詳細的功能需求與非功能需求
- ✅ **明確的驗收標準**：每個功能都有可測量的驗收標準
- ✅ **使用者為中心**：從使用者角度描述需求與使用場景
- ✅ **可追蹤性**：需求有編號，方便追蹤與管理
- ✅ **易於溝通**：讓產品、開發、測試、業務團隊都能理解

### 1.2 PRD 文件的讀者

PRD 文件應該讓以下角色都能理解：

- **產品經理**：規劃產品路線圖
- **開發團隊**：理解需求並實作
- **測試團隊**：制定測試計劃
- **設計團隊**：設計使用者介面與體驗
- **業務團隊**：了解產品特色與賣點
- **高層管理**：評估產品價值與投資回報

### 1.3 PRD 與其他文件的關係

```
產品策略 (Product Strategy)
  │
  ├─> PRD (Product Requirements Document) ← 本文件
  │   │
  │   ├─> 系統分析文件 (SA - System Analysis)
  │   │   - 技術架構
  │   │   - 流程設計
  │   │   - 事件序列
  │   │
  │   ├─> 系統設計文件 (SD - System Design)
  │   │   - API 設計
  │   │   - 資料庫設計
  │   │   - 介面設計
  │   │
  │   └─> 測試計劃 (Test Plan)
  │       - 測試案例
  │       - 測試策略
  │
  └─> 產品路線圖 (Product Roadmap)
```

---

## 2. PRD 文件結構

### 2.1 標準 PRD 章節結構

完整的 PRD 文件應包含以下章節：

```markdown
# [產品名稱] 產品需求文件 (PRD)

> **版本：** v1.0
> **更新日期：** YYYY-MM-DD
> **文件類型：** 產品需求文件 (Product Requirements Document)
> **文件狀態：** Draft / In Review / Approved
> **作者：** [團隊名稱]

## 📋 目錄

## 1. 執行摘要
  1.1 產品願景
  1.2 核心價值主張
  1.3 目標市場

## 2. 產品概述
  2.1 產品定位
  2.2 核心能力
  2.3 技術棧

## 3. 產品目標與目的
  3.1 商業目標
  3.2 產品目標
  3.3 使用者目標

## 4. 目標使用者
  4.1 使用者角色定義
  4.2 使用者人物誌

## 5. 功能需求
  5.1 功能優先級分類
  5.2 FR-1: [功能模組 1]
  5.3 FR-2: [功能模組 2]
  ...

## 6. 非功能需求
  6.1 效能需求
  6.2 可擴展性需求
  6.3 可用性需求
  6.4 安全性需求
  6.5 可維護性需求
  6.6 相容性需求

## 7. 使用案例與情境
  7.1 使用案例概覽
  7.2 UC-1: [使用案例 1]
  7.3 UC-2: [使用案例 2]
  ...

## 8. 系統架構
  8.1 整體架構圖
  8.2 模組互動架構
  8.3 部署架構

## 9. 資料模型
  9.1 核心資料實體
  9.2 資料關聯圖

## 10. 成功指標
  10.1 關鍵績效指標 (KPI)
  10.2 技術指標
  10.3 業務目標

## 11. 假設與依賴
  11.1 假設 (Assumptions)
  11.2 依賴 (Dependencies)

## 12. 限制與約束
  12.1 技術限制
  12.2 業務限制
  12.3 時程約束

## 13. 風險與緩解措施
  13.1 技術風險
  13.2 業務風險
  13.3 專案風險

## 14. 附錄
  14.1 術語表
  14.2 參考文件
  14.3 變更歷史
```

### 2.2 必需章節與可選章節

**必需章節 (Must Have)：**
- ✅ 執行摘要
- ✅ 產品概述
- ✅ 產品目標與目的
- ✅ 目標使用者
- ✅ 功能需求
- ✅ 非功能需求
- ✅ 使用案例與情境

**重要章節 (Should Have)：**
- 系統架構
- 資料模型
- 成功指標
- 風險與緩解措施

**可選章節 (Nice to Have)：**
- 假設與依賴
- 限制與約束
- 市場分析
- 競品分析
- 定價策略

---

## 3. 文件資訊撰寫規範

### 3.1 文件資訊格式

**標準格式：**

```markdown
# [產品名稱] 產品需求文件 (PRD)

> **版本：** v1.0
> **更新日期：** 2025-11-21
> **文件類型：** 產品需求文件 (Product Requirements Document)
> **文件狀態：** Draft
> **作者：** Product Team
> **審核者：** Technical Lead, Project Manager
> **關聯文件：** [SA文件](link), [API文件](link)
```

### 3.2 版本編號規範

採用語意化版本 (Semantic Versioning)：

- **主版本 (Major)**：重大需求變更，不向後相容
  - 例：v1.0 → v2.0
- **次版本 (Minor)**：新增功能，向後相容
  - 例：v1.0 → v1.1
- **修訂版 (Patch)**：錯誤修正、文字調整
  - 例：v1.0 → v1.0.1

**範例：**

```
v1.0     - 初版發布
v1.1     - 新增功能模組
v1.1.1   - 修正文字錯誤
v2.0     - 重大架構調整
```

### 3.3 文件狀態定義

| 狀態 | 說明 | 適用場景 |
|------|-----|---------|
| Draft | 草稿 | 初稿撰寫中 |
| In Review | 審核中 | 已完成初稿，等待審核 |
| Revised | 已修訂 | 審核後修訂中 |
| Approved | 已核准 | 正式核准，可進入開發 |
| Archived | 已封存 | 舊版文件封存 |

---

## 4. 執行摘要撰寫規範

### 4.1 執行摘要目的

執行摘要是整份 PRD 的精華，應該讓高層管理或忙碌的讀者在 5 分鐘內理解：

- **產品是什麼**：產品願景與定位
- **為誰打造**：目標市場與使用者
- **解決什麼問題**：核心價值主張
- **如何衡量成功**：關鍵指標

### 4.2 產品願景撰寫原則

**良好的產品願景應該：**
- 清晰簡潔（1-2 段）
- 具體明確（避免模糊用詞）
- 鼓舞人心（傳達產品價值）
- 可衡量（有明確目標）

**範例：**

```markdown
### 1.1 產品願景

✅ 良好範例：
AI Dataset API 是一個企業級的智慧資料管理與分析平台，透過整合先進的 AI 技術
（RAG、Gemini AI、OpenAI），為企業提供自動化的資料處理、智慧知識檢索與即時
客服助理服務。我們的願景是讓每個企業都能輕鬆運用 AI 技術，將非結構化資料轉
換為可查詢的知識庫，減少 80% 的人工資料處理時間。

❌ 不良範例：
本產品是一個很棒的系統，可以幫助使用者處理資料，提供很多功能，讓企業更有
效率。
```

### 4.3 核心價值主張撰寫

**使用 "痛點 → 解決方案 → 價值" 框架：**

```markdown
### 1.2 核心價值主張

- **自動化資料處理**
  - 痛點：手動整理 Excel 檔案耗時費力，容易出錯
  - 解決方案：AI 自動解析檔案、識別欄位、建立資料結構
  - 價值：減少 80% 人工處理時間，準確率提升至 95%

- **智慧知識檢索**
  - 痛點：使用者需要學習 SQL 才能查詢資料
  - 解決方案：基於 RAG 技術的自然語言查詢
  - 價值：任何人都能用自然語言即時查詢資料

- **即時互動體驗**
  - 痛點：傳統客服系統回應慢，需排隊等待
  - 解決方案：WebSocket 即時通訊 + AI 自動回答
  - 價值：平均回應時間 < 5 秒，24/7 不間斷服務
```

### 4.4 目標市場描述

**包含以下要素：**
- 目標產業
- 目標企業規模
- 目標使用者角色
- 市場規模估計（可選）

```markdown
### 1.3 目標市場

**主要市場：**
- 需要處理大量結構化資料的企業（銷售、財務、營運資料）
- 企業規模：中型企業（100-1000 人）至大型企業（1000+ 人）
- 重點產業：金融、零售、製造、醫療

**次要市場：**
- 需要建立 AI 客服系統的組織
- 需要知識庫管理與查詢系統的團隊
- 資料分析與 BI 團隊

**市場機會：**
- 台灣中大型企業約 5,000 家
- 每家企業平均有 10-50 個潛在使用者
- 預估可觸及市場：50,000-250,000 使用者
```

---

## 5. 產品概述撰寫規範

### 5.1 產品定位撰寫

**使用定位陳述句 (Positioning Statement)：**

```markdown
### 2.1 產品定位

**定位陳述：**

對於 [目標使用者群]
需要 [需求或問題]
[產品名稱] 是一個 [產品類別]
提供 [核心功能或利益]
不同於 [主要競品]
我們的產品 [差異化優勢]

**範例：**

對於需要處理大量資料的企業資料管理員
需要快速整理與查詢結構化資料
AI Dataset API 是一個 AI 驅動的企業資料管理與智慧客服平台
提供自動化資料分析、智慧知識檢索與即時 AI 對話功能
不同於傳統的資料庫管理系統或純 AI 聊天機器人
我們的產品同時具備資料管理與 AI 智慧能力，無需額外整合
```

### 5.2 核心能力描述

**使用樹狀結構清楚呈現：**

```markdown
### 2.2 核心能力

​```
資料處理能力
  ├─> 檔案上傳 (Excel, CSV)
  ├─> AI 自動分析與欄位識別
  ├─> 資料結構化儲存
  └─> 三層式權限管理

AI 智慧能力
  ├─> RAG 知識檢索
  ├─> 多輪對話理解
  ├─> 上下文記憶
  └─> 自然語言生成

即時互動能力
  ├─> WebSocket 即時通訊
  ├─> AI 思考狀態推送
  ├─> 多人協作支援
  └─> 斷線重連機制
​```
```

### 5.3 技術棧說明

**分類列出技術選型：**

```markdown
### 2.3 技術棧

**後端技術：**
- 框架：NestJS (TypeScript)
- 資料庫：PostgreSQL + Prisma ORM
- 即時通訊：Socket.IO v4.x
- 認證：JWT

**AI 技術：**
- 檔案分析：Google Gemini AI
- 對話生成：OpenAI API (GPT-4)
- RAG 架構：Retrieval Augmented Generation
- 向量資料庫：[選定方案]

**基礎設施：**
- 雲端平台：AWS / GCP / Azure
- 容器化：Docker + Kubernetes
- CI/CD：GitHub Actions
- 監控：Prometheus + Grafana
```

---

## 6. 目標使用者撰寫規範

### 6.1 使用者角色定義格式

**標準格式：**

```markdown
### 4.1 使用者角色定義

#### 角色 1：[角色名稱] ([English Role Name])

**角色描述：** [一句話描述角色職責]

**痛點：**
- 痛點 1
- 痛點 2
- 痛點 3

**需求：**
- 需求 1
- 需求 2
- 需求 3

**使用頻率：** [每日多次 / 每日 / 每週 / 每月]

**技術能力：** [高 / 中 / 低]

**KPI / 成功指標：**
- 指標 1
- 指標 2
```

**範例：**

```markdown
#### 角色 1：資料管理員 (Data Manager)

**角色描述：** 負責管理企業資料集、上傳檔案、組織資料結構

**痛點：**
- 手動定義資料結構耗時，每月處理 50+ 個 Excel 需花費 2-3 天
- 欄位映射容易出錯，錯誤率約 15-20%
- 權限管理複雜，需要 IT 部門協助

**需求：**
- 自動化檔案分析，5 分鐘內完成處理
- 智慧欄位識別，準確率 > 90%
- 簡化的權限設定，自己就能操作

**使用頻率：** 每日多次（每天上傳 3-5 個檔案）

**技術能力：** 中等（會使用 Excel，但不會寫程式）

**KPI / 成功指標：**
- 資料處理時間減少 80%
- 資料準確率提升至 95%
- 無需 IT 支援即可完成 90% 的操作
```

### 6.2 使用者人物誌撰寫

**使用具體的人物誌：**

```markdown
### 4.2 使用者人物誌範例

**人物誌：張經理（資料管理員）**

![照片或頭像]

**基本資訊：**
- **姓名：** 張經理
- **年齡：** 35 歲
- **職位：** 資料管理部門經理
- **產業：** 零售業
- **公司規模：** 500 人
- **工作年資：** 10 年

**背景：**
張經理負責管理公司的銷售資料，每月需要整理來自 20 個分店的銷售報表。她對
Excel 非常熟練，但不會寫程式。她的團隊只有 2 個人，工作量很大。

**技術能力：**
- Excel 進階使用 ⭐⭐⭐⭐⭐
- 資料分析 ⭐⭐⭐⭐
- 程式設計 ⭐

**目標：**
- 快速整理每月的銷售資料，供高層查詢分析
- 減少人工處理時間，把時間用在分析而非整理
- 讓業務團隊能自己查詢資料，不用一直問她

**挑戰：**
- 每月需處理 50+ 個 Excel 檔案，手動整理需花費 2-3 天
- 各分店的檔案格式不統一，需要人工調整
- 業務團隊常問重複的問題，她需要一直重複查詢

**期望：**
- 上傳檔案後自動分析，5 分鐘內完成整理
- 系統能自動識別不同的欄位格式
- 提供 AI 助理讓業務團隊自己查詢，減少她的工作量

**典型的一天：**
- 09:00 - 收到分店上傳的銷售報表
- 09:30 - 開始手動整理檔案（調整格式、合併資料）
- 11:00 - 業務經理來問：「上週台北店的業績如何？」需要停下手邊工作查詢
- 14:00 - 繼續整理資料
- 16:00 - 完成資料整理，上傳到公司資料庫
- 16:30 - 又有人來問問題...

**引言：**
"我每天花 4-5 個小時在整理資料，真正分析的時間只有 1-2 小時。如果有工具能
自動幫我整理，我就能把時間花在更有價值的分析工作上。"
```

### 6.3 使用者旅程地圖（可選）

```markdown
### 4.3 使用者旅程地圖

**場景：** 張經理整理月度銷售報表

| 階段 | 行為 | 想法 | 情緒 | 痛點 | 機會點 |
|------|-----|------|------|------|-------|
| 收到檔案 | 下載 20 個分店的報表 | "又要開始整理了..." | 😐 中性 | 檔案格式不統一 | 自動下載與驗證 |
| 檢查格式 | 逐一打開檢查欄位 | "為什麼每次格式都不一樣？" | 😤 煩躁 | 需人工確認每個欄位 | 自動格式識別 |
| 調整資料 | 手動調整欄位、合併檔案 | "這個月又要花好幾天..." | 😫 疲累 | 重複性工作多 | 自動化處理 |
| 回答問題 | 被打斷回答業務問題 | "又來問了，我正在忙..." | 😠 不滿 | 經常被打斷工作 | AI 自動回答 |
| 完成上傳 | 上傳到資料庫 | "終於完成了..." | 😌 鬆一口氣 | 沒時間做分析 | 節省時間做分析 |
```

---

## 7. 功能需求撰寫規範

### 7.1 功能優先級定義

**標準優先級分類：**

```markdown
### 5.1 功能優先級分類

**優先級定義：**
- **P0 (Must Have)**：核心功能，缺少則產品無法運作
  - MVP 必需功能
  - 產品核心價值所在
  - 使用者無法繞過的功能

- **P1 (Should Have)**：重要功能，顯著提升使用者體驗
  - 大幅提升使用者體驗
  - 競品都有的功能
  - 可暫時用替代方案

- **P2 (Nice to Have)**：加分功能，可延後實作
  - 錦上添花的功能
  - 較少使用者需要
  - 可未來再加入

**優先級決策矩陣：**

| 功能影響 \ 實作複雜度 | 低 | 中 | 高 |
|---------------------|----|----|----|
| 高（核心價值）      | P0 | P0 | P0 |
| 中（重要功能）      | P1 | P1 | P2 |
| 低（加分功能）      | P1 | P2 | P2 |
```

### 7.2 功能需求表格格式

**標準格式：**

```markdown
### 5.2 FR-1: [功能模組名稱]

**優先級：** P0

#### 5.2.1 [子功能名稱]

**功能描述：** [一段話描述此功能的目的與價值]

**功能需求：**

| 需求 ID | 功能描述 | 優先級 | 驗收標準 |
|---------|---------|--------|---------|
| FR-1.1.1 | [具體功能描述] | P0 | [可測量的驗收標準] |
| FR-1.1.2 | [具體功能描述] | P0 | [可測量的驗收標準] |
| FR-1.1.3 | [具體功能描述] | P1 | [可測量的驗收標準] |

**API 端點：** （如適用）
​```
POST   /api/resource
GET    /api/resource
GET    /api/resource/{id}
PUT    /api/resource/{id}
DELETE /api/resource/{id}
​```

**資料結構：** （如適用）
​```json
{
  "id": "uuid",
  "name": "資源名稱",
  "status": "ACTIVE"
}
​```

**業務規則：** （如適用）
- 規則 1
- 規則 2
- 規則 3
```

### 7.3 驗收標準撰寫原則

**使用 SMART 原則：**
- **S (Specific)**：具體明確
- **M (Measurable)**：可測量
- **A (Achievable)**：可實現
- **R (Relevant)**：相關聯
- **T (Time-bound)**：有時限（可選）

**範例：**

```markdown
✅ 良好的驗收標準：
- 可成功建立群組，回傳群組 ID（UUID 格式）
- 支援分頁（每頁 10-100 筆），搜尋（關鍵字匹配），排序（建立時間/名稱）
- 更新成功後回傳 200 狀態碼，資料即時生效
- 標記為已刪除，deletedAt 欄位設定為當前時間，資料仍保留在資料庫
- 使用者只能存取有權限的群組，無權限時回傳 403 錯誤

❌ 不良的驗收標準：
- 可以建立群組
- 有分頁功能
- 可以更新
- 支援軟刪除
- 有權限控制
```

### 7.4 流程圖撰寫

**使用 ASCII 字符繪製流程圖：**

```markdown
**處理流程：**

​```
使用者上傳檔案
  │
  ├─> [檔案驗證]
  │   ├─> 檢查檔案格式
  │   ├─> 檢查檔案大小
  │   └─> 驗證檔案內容
  │
  ├─> [格式轉換]
  │   ├─> 如果是 Excel: 轉換為 CSV
  │   └─> 如果是 CSV: 直接使用
  │
  ├─> [AI 分析]
  │   ├─> 調用 Gemini AI API
  │   ├─> 傳送 CSV 內容 + Prompt
  │   ├─> 接收分析結果 (2-10 秒)
  │   └─> 解析 AI 回應
  │
  ├─> [結果處理]
  │   ├─> 驗證分析結果格式
  │   ├─> 提取 key mapping
  │   ├─> 提取結構化資料
  │   └─> 儲存分析結果
  │
  └─> [回應使用者]
      ├─> 成功: 回傳 Dataset ID
      └─> 失敗: 回傳錯誤訊息
​```
```

---

## 8. 非功能需求撰寫規範

### 8.1 效能需求

**使用表格清楚列出指標：**

```markdown
### 6.1 NFR-1: 效能需求

| 需求 ID | 需求描述 | 目標值 | 測量方式 | 測試條件 |
|---------|---------|--------|---------|---------|
| NFR-1.1 | API 回應時間 | < 200ms | 95th percentile | 正常負載下 |
| NFR-1.2 | AI 分析處理時間 | 2-10 秒 | 平均值 | 標準 Excel 檔案 (< 5MB) |
| NFR-1.3 | AI 對話回應時間 | < 5 秒 | 平均值 | 一般問題，RAG 檢索 3-5 筆 |
| NFR-1.4 | WebSocket 訊息延遲 | < 100ms | 平均值 | 同一區域內 |
| NFR-1.5 | 資料庫查詢時間 | < 50ms | 95th percentile | 單表查詢 |
| NFR-1.6 | 檔案上傳速度 | > 1MB/s | 平均值 | 正常網路環境 |

**效能測試場景：**

1. **壓力測試**
   - 同時 1000 個使用者
   - 每秒 100 個 API 請求
   - 持續 30 分鐘

2. **尖峰負載測試**
   - 瞬間 5000 個併發使用者
   - 觀察系統回應時間與錯誤率

3. **長時間穩定性測試**
   - 持續運行 48 小時
   - 觀察記憶體洩漏與效能衰退
```

### 8.2 可擴展性需求

```markdown
### 6.2 NFR-2: 可擴展性需求

| 需求 ID | 需求描述 | 目標值 | 擴展策略 |
|---------|---------|--------|---------|
| NFR-2.1 | 支援同時線上使用者數 | 10,000+ | 水平擴展 API 伺服器 |
| NFR-2.2 | 支援同時 WebSocket 連線數 | 5,000+ | WebSocket 伺服器叢集 |
| NFR-2.3 | 支援 Dataset 數量 | 100,000+ | 資料分片、索引優化 |
| NFR-2.4 | 單一 Dataset 資料筆數 | 1,000,000+ | JSON 資料壓縮、分頁載入 |
| NFR-2.5 | 支援聊天室數量 | 50,000+ | Redis 快取、資料庫分片 |

**擴展方案：**

1. **水平擴展 (Horizontal Scaling)**
   - API 伺服器：Kubernetes 自動擴展（3-10 個 Pod）
   - WebSocket 伺服器：叢集模式 + Redis Pub/Sub
   - 資料庫：讀寫分離 (1 Primary + 2 Replicas)

2. **垂直擴展 (Vertical Scaling)**
   - 資料庫伺服器：依需求升級 CPU/記憶體
   - 向量資料庫：使用高效能 SSD

3. **資料分片策略**
   - Dataset：依 DatasetGroup 分片
   - ChatMessage：依 ChatRoom 分片
   - 保留未來跨區域部署的可能性
```

### 8.3 安全性需求

```markdown
### 6.4 NFR-4: 安全性需求

| 需求 ID | 需求描述 | 實作方式 | 標準/規範 |
|---------|---------|---------|----------|
| NFR-4.1 | 使用者認證 | JWT Token | RFC 7519 |
| NFR-4.2 | API 授權 | Role-Based Access Control (RBAC) | NIST RBAC |
| NFR-4.3 | 資料加密（傳輸） | HTTPS/TLS 1.3 | RFC 8446 |
| NFR-4.4 | 資料加密（儲存） | AES-256 加密敏感欄位 | FIPS 197 |
| NFR-4.5 | SQL 注入防護 | Prisma ORM 參數化查詢 | OWASP Top 10 |
| NFR-4.6 | XSS 防護 | 輸入驗證 + CSP Header | OWASP Top 10 |
| NFR-4.7 | CSRF 防護 | CSRF Token | OWASP CSRF |
| NFR-4.8 | Rate Limiting | 每分鐘 100 請求/IP | - |
| NFR-4.9 | 密碼政策 | 8+ 字元，大小寫+數字+符號 | NIST SP 800-63B |
| NFR-4.10 | Session 管理 | 30 分鐘無活動自動登出 | - |

**安全測試計劃：**

1. **滲透測試 (Penetration Testing)**
   - 每季執行一次
   - 使用 OWASP ZAP 進行自動化掃描
   - 委外專業團隊進行人工測試

2. **弱點掃描 (Vulnerability Scanning)**
   - 每週自動掃描
   - 使用 Snyk 掃描相依套件
   - Critical 等級弱點需 24 小時內修復

3. **安全稽核 (Security Audit)**
   - 每年執行一次完整稽核
   - 符合 ISO 27001 標準
```

---

## 9. 使用案例撰寫規範

### 9.1 使用案例概覽表格

```markdown
### 7.1 使用案例概覽

| 案例 ID | 案例名稱 | 主要角色 | 優先級 | 涉及模組 | 預估使用頻率 |
|---------|---------|---------|--------|---------|-------------|
| UC-1 | 企業資料分析與查詢 | 資料管理員、業務分析師 | P0 | Dataset, Upload, AI Assistant | 每日 |
| UC-2 | 客服知識庫建立 | 系統管理員、終端使用者 | P0 | Dataset, Prompt, AI Assistant | 每週 |
| UC-3 | AI 助理對話 | 終端使用者 | P0 | Chat Room, Real-time Chat | 每小時 |
| UC-4 | 多人協作資料標註 | 資料管理員、團隊成員 | P1 | Dataset, Chat Room | 每日 |
| UC-5 | 動態調整 AI 行為 | 系統管理員 | P1 | Prompt Management | 每月 |
```

### 9.2 詳細使用案例格式

```markdown
### 7.2 UC-1: [使用案例名稱]

#### 7.2.1 情境一：[具體情境描述]

**流程說明：** [一句話描述此情境的核心流程]

**前置條件：**
- 條件 1
- 條件 2
- 條件 3

**事件流程：**

​```
[主要角色] [執行動作]
  │
  ├─> [步驟 1]
  │   ├─> [子步驟 1.1]
  │   ├─> [子步驟 1.2]
  │   └─> [子步驟 1.3]
  │
  ├─> [步驟 2]
  │   ├─> [Server] [伺服器處理]
  │   │   ├─> [處理細節 1]
  │   │   └─> [處理細節 2]
  │   │
  │   └─> [回應結果]
  │
  └─> [Client] [使用者收到結果]
​```

**時序圖：** （複雜流程必需）

​```
[角色A]    [角色B]    [角色C]
   │          │          │
   ├─ 動作 ─>│          │
   │          ├─ 處理 ─>│
   │          │<─ 結果 ─┤
   │<─ 回應 ─┤          │
   │          │          │
​```

**使用場景：**

1. **場景 1**：[具體描述使用情境]
2. **場景 2**：[具體描述使用情境]
3. **場景 3**：[具體描述使用情境]

**實作重點：**

- **重點 1**：[實作時需注意的關鍵點]
- **重點 2**：[實作時需注意的關鍵點]
- **重點 3**：[實作時需注意的關鍵點]

**注意事項：**

- 注意事項 1
- 注意事項 2
- 注意事項 3

**成功指標：**

- 指標 1：[可測量的指標]
- 指標 2：[可測量的指標]

**失敗處理：**

| 錯誤情況 | 錯誤訊息 | 處理方式 |
|---------|---------|---------|
| 情況 1 | "錯誤訊息" | 處理方式說明 |
| 情況 2 | "錯誤訊息" | 處理方式說明 |
```

### 9.3 流程圖與時序圖撰寫規範

**參考 SA 文件風格指南：**
- 使用標準 ASCII 字符（`│`, `├─>`, `└─>`）
- 保持對齊與縮排一致
- 清楚標示角色與步驟
- 包含重要的資料結構

**詳細規範請參考：** [SA Documentation Style Guide](./sa-documentation-style-guide.md)

---

## 10. 系統架構撰寫規範

### 10.1 整體架構圖

**使用分層架構圖：**

```markdown
### 8.1 整體架構圖

​```
┌─────────────────────────────────────────────────────────────────┐
│                          前端應用層                              │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐         │
│  │ Web Dashboard│  │ Mobile App   │  │ Admin Panel  │         │
│  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘         │
│         │                  │                  │                  │
│         └──────────────────┼──────────────────┘                 │
└────────────────────────────┼──────────────────────────────────┘
                             │ HTTP/WebSocket
                             ↓
┌─────────────────────────────────────────────────────────────────┐
│                       API Gateway Layer                          │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │  認證中介層 (Authentication Middleware)                   │  │
│  │  - JWT 驗證                                              │  │
│  │  - 權限檢查 (RBAC)                                       │  │
│  └──────────────────────────────────────────────────────────┘  │
│                                                                  │
│  ┌─────────────────────┐  ┌────────────────────────────────┐  │
│  │   RESTful API       │  │   WebSocket Gateway            │  │
│  │   - CRUD Operations │  │   - Real-time Events           │  │
│  └─────────────────────┘  └────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────┘
                             │
                             ↓
┌─────────────────────────────────────────────────────────────────┐
│                         業務邏輯層                               │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐         │
│  │   Module A   │  │   Module B   │  │   Module C   │         │
│  └──────────────┘  └──────────────┘  └──────────────┘         │
└─────────────────────────────────────────────────────────────────┘
                             │
                             ↓
┌─────────────────────────────────────────────────────────────────┐
│                         資料層                                   │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │                     Database                              │  │
│  └──────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────┘
​```
```

### 10.2 模組互動架構

```markdown
### 8.2 模組互動架構

**[功能流程名稱]**

​```
[觸發點]
  │
  ├─> [Module A]
  │   ├─> 動作 1
  │   └─> 動作 2
  │
  ├─> [Module B]
  │   └─> 處理邏輯
  │
  └─> [Module C]
      ├─> 動作 1
      └─> 動作 2
​```

**模組依賴關係：**

| 模組 | 依賴模組 | 依賴原因 |
|------|---------|---------|
| Module A | Module B | 需要 B 提供資料 |
| Module A | Module C | 需要 C 的處理結果 |
```

### 10.3 部署架構

```markdown
### 8.3 部署架構

**生產環境部署架構：**

​```
                    ┌─────────────┐
                    │   CDN       │
                    └──────┬──────┘
                           ↓
                ┌──────────────────┐
                │  Load Balancer   │
                └──────┬───────────┘
                       │
        ┌──────────────┼──────────────┐
        ↓              ↓              ↓
  ┌─────────┐    ┌─────────┐    ┌─────────┐
  │ Server 1│    │ Server 2│    │ Server 3│
  └────┬────┘    └────┬────┘    └────┬────┘
       │              │              │
       └──────────────┼──────────────┘
                      ↓
              ┌───────────────┐
              │ Redis Cluster │
              └───────┬───────┘
                      ↓
         ┌────────────────────────┐
         │ PostgreSQL (Primary)   │
         │ + Read Replicas        │
         └────────────────────────┘
​```

**部署規格：**

| 元件 | 規格 | 數量 | 備註 |
|------|-----|------|------|
| Application Server | 4 vCPU, 8GB RAM | 3 | Auto-scaling 3-10 |
| Database Primary | 8 vCPU, 32GB RAM | 1 | - |
| Database Replica | 4 vCPU, 16GB RAM | 2 | Read-only |
| Redis | 2 vCPU, 8GB RAM | 3 | Cluster mode |
| Load Balancer | - | 1 | Managed service |
```

---

## 11. 成功指標撰寫規範

### 11.1 KPI 表格格式

```markdown
### 10.1 關鍵績效指標 (KPI)

| KPI 類別 | 指標名稱 | 目標值 | 測量週期 | 資料來源 | 負責人 |
|---------|---------|--------|---------|---------|-------|
| **效率指標** | 檔案處理時間 | < 10 秒/檔案 | 每日 | 系統日誌 | 技術團隊 |
| | AI 回應時間 | < 5 秒/問題 | 每日 | 系統日誌 | 技術團隊 |
| | 資料處理自動化率 | > 80% | 每月 | UploadHistory | 產品團隊 |
| **品質指標** | AI 回答準確率 | > 90% | 每週 | 使用者反饋 | AI 團隊 |
| | 系統錯誤率 | < 0.1% | 每日 | 錯誤日誌 | 技術團隊 |
| | RAG 檢索準確率 | > 90% | 每週 | 測試集驗證 | AI 團隊 |
| **使用者體驗** | 使用者滿意度 | > 4.0/5.0 | 每月 | 使用者問卷 | 產品團隊 |
| | 平均對話輪數 | > 3 輪 | 每週 | ChatMessage | 產品團隊 |
| | WebSocket 連線穩定性 | > 99% | 每日 | 監控系統 | 技術團隊 |
| **商業指標** | 月活躍使用者 (MAU) | 持續成長 | 每月 | 使用者日誌 | 業務團隊 |
| | 日上傳檔案數 | 持續成長 | 每日 | UploadHistory | 業務團隊 |
| | AI 對話數 | 持續成長 | 每日 | ChatMessage | 業務團隊 |
| | 付費轉換率 | > 10% | 每月 | 訂單系統 | 業務團隊 |
| | 使用者留存率 (30天) | > 60% | 每月 | 使用者日誌 | 產品團隊 |
```

### 11.2 業務目標設定

**使用時間軸區分：**

```markdown
### 10.3 業務目標

**短期目標 (3 個月 - Q1 2025)**
- [ ] 完成核心功能開發 (P0 功能)
- [ ] 達到 1,000 MAU
- [ ] 系統可用性 > 99%
- [ ] AI 回答準確率 > 85%
- [ ] 完成 10 個企業 Pilot 測試

**中期目標 (6 個月 - Q2 2025)**
- [ ] 完成所有 P1 功能
- [ ] 達到 5,000 MAU
- [ ] AI 回答準確率 > 90%
- [ ] 支援 10,000+ Dataset
- [ ] 達成 50 個付費客戶

**長期目標 (12 個月 - Q4 2025)**
- [ ] 達到 20,000 MAU
- [ ] 支援多語言（英文、日文）
- [ ] 建立合作夥伴生態系（5+ 夥伴）
- [ ] 企業級 SLA 保證（99.9% Uptime）
- [ ] 達成 200 個付費客戶，月營收 > $100K
```

---

## 12. 風險管理撰寫規範

### 12.1 風險評估矩陣

```markdown
### 13.1 技術風險

**風險評估矩陣：**

| 風險等級 | 可能性 | 影響程度 | 行動 |
|---------|-------|---------|------|
| 極高 | 高 | 高 | 立即處理，建立備案 |
| 高 | 高 | 中 或 中 | 高 | 優先處理，密切監控 |
| 中 | 中 | 中 或 低 | 高 | 規劃處理，定期檢視 |
| 低 | 低 | 低 | 持續觀察 |

**技術風險清單：**

| 風險 ID | 風險描述 | 可能性 | 影響程度 | 風險等級 | 緩解措施 | 負責人 | 狀態 |
|---------|---------|-------|---------|---------|---------|-------|------|
| TR-001 | AI API 服務中斷 | 中 | 高 | 高 | 1. 準備多個 AI 提供商<br>2. 實作降級機制<br>3. 快取常見回答 | CTO | 進行中 |
| TR-002 | 資料庫效能瓶頸 | 中 | 高 | 高 | 1. 實作讀寫分離<br>2. 增加快取層<br>3. 資料分片策略 | Tech Lead | 規劃中 |
| TR-003 | WebSocket 連線不穩 | 低 | 中 | 中 | 1. 實作自動重連<br>2. 訊息佇列保證送達<br>3. 降級至輪詢 | Backend Team | 已完成 |
```

### 12.2 風險應對計劃

```markdown
**風險應對詳細計劃：**

#### TR-001: AI API 服務中斷

**風險描述：**
主要 AI 提供商（Gemini AI 或 OpenAI）服務中斷，導致核心功能無法使用。

**影響評估：**
- 影響功能：檔案分析、AI 對話
- 影響使用者：100% 使用者
- 預估損失：每小時 $1,000 (業務損失 + 信譽損失)

**緩解措施：**

1. **預防措施（降低可能性）**
   - 選擇高可用性的 AI 服務提供商
   - 簽訂 SLA 合約，確保服務品質
   - 監控 AI API 狀態，提前預警

2. **應對措施（降低影響）**
   - **備用 AI 提供商**
     - 主要：Gemini AI
     - 備用 1：OpenAI GPT-4
     - 備用 2：Claude API
     - 實作：透過 Strategy Pattern 快速切換

   - **降級機制**
     - Level 1：切換備用 AI 提供商（自動，< 1 分鐘）
     - Level 2：使用快取的歷史回答（自動）
     - Level 3：人工處理（手動，通知管理員）

   - **快取策略**
     - 快取常見問題的回答（Top 100 問題）
     - 快取檔案分析結果（相似檔案）
     - 快取有效期：7 天

3. **恢復措施（事後處理）**
   - 自動發送通知給技術團隊
   - 記錄失敗的請求，服務恢復後重試
   - 事後檢討，優化應對流程

**監控與告警：**
- API 回應時間監控（閾值：> 5 秒）
- API 錯誤率監控（閾值：> 5%）
- 服務可用性監控（每分鐘檢查）
- Slack/Email 告警通知

**測試計劃：**
- 每月進行災難恢復演練
- 測試切換至備用 AI 提供商的流程
- 驗證降級機制是否正常運作

**負責人：**
- 主要：CTO
- 協助：Backend Team Lead

**狀態：** 進行中（預計 2025-12-31 完成）
```

---

## 13. 完整 PRD 範例

### 13.1 範例：簡化版 PRD

```markdown
# 待辦事項管理系統 (Todo Management System) PRD

> **版本：** v1.0
> **更新日期：** 2025-11-21
> **文件狀態：** Draft
> **作者：** Product Team

---

## 📋 目錄

- [1. 執行摘要](#1-執行摘要)
- [2. 產品概述](#2-產品概述)
- [3. 目標使用者](#3-目標使用者)
- [4. 功能需求](#4-功能需求)
- [5. 非功能需求](#5-非功能需求)
- [6. 使用案例](#6-使用案例)

---

## 1. 執行摘要

### 1.1 產品願景

Todo Management System 是一個簡潔高效的待辦事項管理工具，幫助個人與團隊
組織工作、追蹤進度、提升生產力。

### 1.2 核心價值主張

- **簡單易用**：30 秒內上手，無需學習曲線
- **跨平台同步**：Web/Mobile/Desktop 即時同步
- **團隊協作**：支援任務分配、進度追蹤、評論討論

### 1.3 目標市場

- 個人使用者（自由工作者、學生）
- 小型團隊（5-20 人）
- 專案管理團隊

---

## 2. 產品概述

### 2.1 產品定位

對於需要管理多個任務的個人與團隊
Todo Management System 是一個待辦事項管理工具
提供簡單直覺的任務管理與團隊協作功能
不同於 Trello、Asana 等複雜專案管理工具
我們的產品專注於簡單高效，降低使用門檻

### 2.2 核心能力

​```
任務管理
  ├─> 建立、編輯、刪除任務
  ├─> 設定優先級與到期日
  └─> 任務分類與標籤

團隊協作
  ├─> 任務分配
  ├─> 評論與討論
  └─> 進度追蹤

即時同步
  ├─> 跨裝置同步
  └─> 即時通知
​```

---

## 3. 目標使用者

### 3.1 使用者角色

#### 角色 1：個人使用者 (Individual User)

**痛點：**
- 記不住所有待辦事項
- 不知道該優先處理哪些任務
- 無法追蹤任務完成進度

**需求：**
- 快速記錄待辦事項
- 清楚看到所有未完成任務
- 設定提醒避免忘記

---

## 4. 功能需求

### 4.1 功能優先級

- **P0**：任務 CRUD、優先級設定、到期日
- **P1**：任務分類、標籤、搜尋
- **P2**：團隊協作、評論、附件

### 4.2 FR-1: 任務管理

**優先級：** P0

| 需求 ID | 功能描述 | 優先級 | 驗收標準 |
|---------|---------|--------|---------|
| FR-1.1 | 建立任務 | P0 | 輸入標題後按 Enter 即可建立 |
| FR-1.2 | 編輯任務 | P0 | 可修改標題、描述、優先級、到期日 |
| FR-1.3 | 刪除任務 | P0 | 軟刪除，30 天後永久刪除 |
| FR-1.4 | 完成任務 | P0 | 勾選完成，移至已完成列表 |
| FR-1.5 | 設定優先級 | P0 | 高/中/低三個等級，顏色區分 |

---

## 5. 非功能需求

### 5.1 效能需求

| 需求 | 目標值 |
|------|-------|
| 頁面載入時間 | < 2 秒 |
| API 回應時間 | < 200ms |
| 同步延遲 | < 1 秒 |

### 5.2 安全性需求

- 使用者認證：Email + Password 或 Google OAuth
- 資料加密：HTTPS/TLS 1.3
- 密碼政策：8+ 字元

---

## 6. 使用案例

### 6.1 UC-1: 個人任務管理

**情境：** 使用者早上開始工作，規劃今日任務

**流程：**
1. 開啟應用程式
2. 檢視今日待辦任務
3. 新增 3 個新任務
4. 設定優先級（高/中/低）
5. 設定到期日
6. 開始執行任務
7. 完成任務時勾選完成

**成功指標：**
- 3 分鐘內完成任務規劃
- 清楚知道今日要完成的任務

---

## 14. 附錄

### 14.1 術語表

| 術語 | 說明 |
|------|-----|
| 任務 (Task) | 需要完成的待辦事項 |
| 優先級 (Priority) | 任務的重要程度（高/中/低） |
| 到期日 (Due Date) | 任務的截止日期 |

---

**© 2025 Todo Management System Team.**
```

---

## 14. 檢查清單

### 14.1 PRD 完整性檢查清單

**文件資訊：**
- [ ] 文件標題清楚
- [ ] 版本號正確
- [ ] 更新日期正確
- [ ] 文件狀態明確
- [ ] 作者與審核者列出
- [ ] 目錄完整且連結正確

**執行摘要：**
- [ ] 產品願景清晰簡潔（1-2 段）
- [ ] 核心價值主張明確（3-5 點）
- [ ] 目標市場定義清楚
- [ ] 包含關鍵指標

**產品概述：**
- [ ] 產品定位陳述完整
- [ ] 核心能力清楚列出
- [ ] 技術棧說明完整
- [ ] 與競品的差異化明確

**目標使用者：**
- [ ] 至少定義 2-3 個使用者角色
- [ ] 每個角色包含痛點、需求、使用頻率
- [ ] 至少有 1 個詳細的使用者人物誌
- [ ] 人物誌包含背景、目標、挑戰、引言

**功能需求：**
- [ ] 功能優先級清楚定義（P0/P1/P2）
- [ ] 每個功能模組有清楚的描述
- [ ] 需求表格完整（需求 ID、描述、優先級、驗收標準）
- [ ] 驗收標準可測量且明確
- [ ] 複雜流程有流程圖說明
- [ ] API 端點清楚列出（如適用）
- [ ] 資料結構定義完整（如適用）

**非功能需求：**
- [ ] 效能需求有明確目標值
- [ ] 可擴展性需求定義清楚
- [ ] 安全性需求符合標準
- [ ] 可維護性需求完整
- [ ] 所有指標都可測量

**使用案例：**
- [ ] 至少有 3-5 個主要使用案例
- [ ] 每個案例包含流程說明
- [ ] 複雜案例有流程圖或時序圖
- [ ] 使用場景具體且真實
- [ ] 實作重點清楚
- [ ] 注意事項完整

**系統架構：**
- [ ] 整體架構圖清楚易懂
- [ ] 模組互動關係明確
- [ ] 部署架構完整
- [ ] 技術選型有說明

**資料模型：**
- [ ] 核心實體定義完整
- [ ] 資料關聯圖清楚
- [ ] Schema 格式正確（如適用）

**成功指標：**
- [ ] KPI 表格完整
- [ ] 每個指標都可測量
- [ ] 包含測量週期與資料來源
- [ ] 業務目標分短/中/長期

**風險管理：**
- [ ] 至少識別 5-10 個風險
- [ ] 每個風險有評估（可能性、影響程度）
- [ ] 每個風險有緩解措施
- [ ] 關鍵風險有詳細應對計劃

**附錄：**
- [ ] 術語表完整
- [ ] 參考文件連結正確
- [ ] 變更歷史記錄完整
- [ ] 審核記錄表格存在

### 14.2 PRD 品質檢查清單

**清晰性：**
- [ ] 語言清楚易懂
- [ ] 避免技術黑話（或有解釋）
- [ ] 沒有模稜兩可的描述
- [ ] 每個需求都有明確的驗收標準

**完整性：**
- [ ] 涵蓋所有必要章節
- [ ] 沒有遺漏的重要功能
- [ ] 非功能需求完整
- [ ] 風險評估完整

**一致性：**
- [ ] 術語使用一致
- [ ] 格式一致
- [ ] 版本號一致
- [ ] 無前後矛盾

**可追蹤性：**
- [ ] 每個需求有唯一 ID
- [ ] 需求與使用案例對應
- [ ] 需求與測試案例可追溯（如適用）

**可測試性：**
- [ ] 驗收標準可測試
- [ ] 非功能需求可測量
- [ ] KPI 可追蹤

**可維護性：**
- [ ] 文件結構清楚
- [ ] 容易找到特定資訊
- [ ] 變更歷史完整
- [ ] 容易更新

### 14.3 PRD 審核檢查清單

**產品經理審核：**
- [ ] 產品願景與策略一致
- [ ] 功能優先級合理
- [ ] 使用案例貼近實際
- [ ] KPI 可達成且有挑戰性

**技術主管審核：**
- [ ] 技術可行性確認
- [ ] 架構設計合理
- [ ] 非功能需求可實現
- [ ] 風險評估完整

**專案經理審核：**
- [ ] 需求範圍明確
- [ ] 時程規劃合理
- [ ] 資源需求清楚
- [ ] 風險可控

**設計主管審核：**
- [ ] 使用者體驗考慮完整
- [ ] 使用案例合理
- [ ] 介面需求清楚（如適用）

**測試主管審核：**
- [ ] 驗收標準可測試
- [ ] 測試範圍明確
- [ ] 非功能需求可驗證

---

## 附錄 A：PRD 範本檔案

**範本檔案位置：** `docs/templates/prd-template.md`

**使用方式：**
1. 複製範本檔案
2. 重新命名為 `[產品名稱]-prd.md`
3. 填寫各章節內容
4. 根據實際情況調整章節（刪除不適用的章節）
5. 提交審核

---

## 附錄 B：常見問題 (FAQ)

### Q1: PRD 應該多詳細？

**A:** 取決於產品複雜度與團隊規模：
- **簡單產品 / 小團隊**：10-20 頁，專注核心功能
- **中等複雜度**：20-40 頁，包含所有章節
- **複雜產品 / 大團隊**：40+ 頁，詳細的需求與流程

### Q2: PRD 與 SA/SD 文件的差異？

**A:**
- **PRD**：產品需求，從使用者角度，描述「要做什麼」
- **SA**：系統分析，技術角度，描述「如何實現」
- **SD**：系統設計，詳細設計，描述「具體怎麼做」

### Q3: 何時更新 PRD？

**A:**
- **主版本更新**：重大功能變更、架構調整
- **次版本更新**：新增功能模組
- **修訂版更新**：錯誤修正、文字調整、小幅調整

### Q4: 誰應該撰寫 PRD？

**A:**
- **主要撰寫者**：產品經理 (Product Manager)
- **協助者**：技術主管、UX 設計師、業務團隊
- **審核者**：技術主管、專案經理、高層管理

### Q5: PRD 與 User Story 的關係？

**A:**
- **PRD**：完整的產品需求文件，包含所有功能
- **User Story**：敏捷開發中的最小需求單位
- **關係**：User Story 從 PRD 中的功能需求拆解而來

---

## 附錄 C：推薦工具

### 文件撰寫工具
- **Notion**：協作撰寫，支援表格、圖表
- **Confluence**：企業級文件管理
- **Google Docs**：即時協作，版本控制
- **Markdown Editor**：VSCode、Typora

### 流程圖工具
- **Mermaid**：程式碼生成流程圖
- **Draw.io**：免費的流程圖工具
- **Lucidchart**：專業流程圖工具

### 專案管理工具
- **Jira**：需求追蹤、開發管理
- **Linear**：現代化專案管理
- **Notion**：一站式專案管理

---

**文件版本歷史：**

| 版本 | 日期 | 說明 |
| ---- | ---------- | ------------------------------------------------------ |
| v1.0 | 2025-11-21 | 初版發布，建立 PRD 撰寫風格指南 |

---

**© 2025 Sys AI Dataset API Documentation Team. All rights reserved.**
